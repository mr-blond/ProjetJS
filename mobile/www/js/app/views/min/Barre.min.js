define(function(t){"use strict";var e,n,r=(t("jquery"),t("underscore")),o=t("backbone"),a=t("text!tpl/Carte.html"),i=t("kinetic"),d=t("socketio"),c=r.template(a),u=function(){window.addEventListener("deviceorientation",function(t){var e=t.gamma,n=t.beta,r=t.alpha,o=null;l(e,n,r,o)},!1)},l=function(t){e.rotateBar(Math.round(t)),e.sendData()};return o.View.extend({rect:"",initialize:function(t){e=this,e.render(),n=d.connect("http://192.168.74.50:8080"),t.model},render:function(){return e.$el.html(c()),this},drawTheBarre:function(){var t=new i.Stage({width:500,height:300,container:"whereToPutCanvas"}),n=new i.Layer;e.rect=new i.Rect(e.model.toJSON()),n.add(e.rect),t.add(n),u()},rotateBar:function(t){e.rect.setRotationDeg(t)},sendData:function(){e.model.set({x:e.rect.attrs.x,y:e.rect.attrs.x,rotation:e.rect.getRotationDeg()}),n.emit("targetMove",{id:e.model.get("id"),x:e.model.get("y"),y:e.model.get("y"),rotation:e.model.get("rotation")})}})});